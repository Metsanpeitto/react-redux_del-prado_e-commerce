{"ast":null,"code":"import _toConsumableArray from \"/home/jarri/Desktop/projects-web/react-new/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"/home/jarri/Desktop/projects-web/react-new/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport { ADD_TO_CART, REMOVE_FROM_CART, INCREMENT_QTY, DECREMENT_QTY } from \"../constants/ActionTypes\";\nexport default function cartReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n    cart: []\n  };\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case ADD_TO_CART:\n      var productId = action.product.id;\n\n      if (state.cart.findIndex(function (product) {\n        return product.id === productId;\n      }) !== -1) {\n        var cart = state.cart.reduce(function (cartAcc, product) {\n          if (product.id === productId) {\n            cartAcc.push(_objectSpread({}, product, {\n              qty: product.qty + 1,\n              sum: product.price * product.discount / 100 * (product.qty + 1)\n            })); // Increment qty\n          } else {\n            cartAcc.push(product);\n          }\n\n          return cartAcc;\n        }, []);\n        return _objectSpread({}, state, {\n          cart: cart\n        });\n      }\n\n      return _objectSpread({}, state, {\n        cart: [].concat(_toConsumableArray(state.cart), [_objectSpread({}, action.product, {\n          qty: action.qty,\n          sum: action.product.price * action.product.discount / 100 * action.qty\n        })])\n      });\n\n    case DECREMENT_QTY:\n      if (state.cart.findIndex(function (product) {\n        return product.id === action.productId;\n      }) !== -1) {\n        var _cart = state.cart.reduce(function (cartAcc, product) {\n          if (product.id === action.productId && product.qty > 1) {\n            //console.log('price: '+product.price+'Qty: '+product.qty)\n            cartAcc.push(_objectSpread({}, product, {\n              qty: product.qty - 1,\n              sum: product.price * product.discount / 100 * (product.qty - 1)\n            })); // Decrement qty\n          } else {\n            cartAcc.push(product);\n          }\n\n          return cartAcc;\n        }, []);\n\n        return _objectSpread({}, state, {\n          cart: _cart\n        });\n      }\n\n      return _objectSpread({}, state, {\n        cart: [].concat(_toConsumableArray(state.cart), [_objectSpread({}, action.product, {\n          qty: action.qty,\n          sum: action.product.price * action.qty\n        })])\n      });\n\n    case REMOVE_FROM_CART:\n      return {\n        cart: state.cart.filter(function (item) {\n          return item.id !== action.product_id.id;\n        })\n      };\n\n    default:\n  }\n\n  return state;\n}","map":{"version":3,"sources":["/home/jarri/Desktop/projects-web/react-new/front-end/src/reducers/cart.js"],"names":["ADD_TO_CART","REMOVE_FROM_CART","INCREMENT_QTY","DECREMENT_QTY","cartReducer","state","cart","action","type","productId","product","id","findIndex","reduce","cartAcc","push","qty","sum","price","discount","filter","item","product_id"],"mappings":"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","sourcesContent":["import {\r\n    ADD_TO_CART,\r\n    REMOVE_FROM_CART,\r\n    INCREMENT_QTY,\r\n    DECREMENT_QTY } from \"../constants/ActionTypes\";\r\n\r\n\r\nexport default function cartReducer(state = {\r\n    cart: []\r\n}, action) {\r\n    switch (action.type) {\r\n        case ADD_TO_CART:\r\n            const productId = action.product.id\r\n            if (state.cart.findIndex(product => product.id === productId) !== -1) {\r\n                const cart = state.cart.reduce((cartAcc, product) => {\r\n                    if (product.id === productId) {\r\n                        cartAcc.push({ ...product, qty: product.qty+1, sum: (product.price*product.discount/100)*(product.qty+1) }) // Increment qty\r\n                    } else {\r\n                        cartAcc.push(product)\r\n                    }\r\n\r\n                    return cartAcc\r\n                }, [])\r\n\r\n                return { ...state, cart }\r\n            }\r\n\r\n            return { ...state, cart: [...state.cart, { ...action.product, qty: action.qty, sum: (action.product.price*action.product.discount/100)*action.qty }] }\r\n\r\n        case DECREMENT_QTY:\r\n            \r\n            if (state.cart.findIndex(product => product.id === action.productId) !== -1) {\r\n                const cart = state.cart.reduce((cartAcc, product) => {\r\n                    if (product.id === action.productId && product.qty > 1) {\r\n                        //console.log('price: '+product.price+'Qty: '+product.qty)\r\n                        cartAcc.push({ ...product, qty: product.qty-1, sum: (product.price*product.discount/100)*(product.qty-1) }) // Decrement qty\r\n                    } else {\r\n                        cartAcc.push(product)\r\n                    }\r\n\r\n                    return cartAcc\r\n                }, [])\r\n\r\n                return { ...state, cart }\r\n            }\r\n\r\n            return { ...state, cart: [...state.cart, { ...action.product, qty: action.qty, sum: action.product.price*action.qty }] }\r\n\r\n        case REMOVE_FROM_CART:\r\n            return {\r\n                cart: state.cart.filter(item => item.id !== action.product_id.id)\r\n            }\r\n\r\n        default:\r\n    }\r\n    return state;\r\n}\r\n"]},"metadata":{},"sourceType":"module"}